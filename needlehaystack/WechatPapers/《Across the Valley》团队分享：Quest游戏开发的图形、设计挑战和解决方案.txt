《Across the Valley》团队分享：Quest游戏开发的图形、设计挑战和解决方案          原创                                      映维网Nweon                                                  映维网Nweon              映维网Nweon微信号NweonXR功能介绍映维网是一个始于2014年10月的增强现实（AR）、虚拟现实（VR）产业信息数据平台，专注于AR/VR产业发展及市场教育培养，致力于引导全球AR/VR产业发展，服务于全球各地的AR/VR创业者。在游戏开发中遇到的图形和设计挑战和相关解决方案（映维网Nweon 2024年03月04日）FusionPlay是一家位于德国的小型独立工作室，他们自2016年以来就一直在开发VR游戏。团队在2018年为Oculus Rift发行了第一款游戏《Konrad the Kitten》，紧接着是2019年的《Konrad’s cats》。现在，我们正致力于优化在2023年8月登陆Meta Quest的游戏《Across the Valley》。在日前一篇博文中，团队介绍了在游戏开发中遇到的图形和设计挑战和相关解决方案:1. 图形1.1 风格对于《Across the Valley》，我们从密集的实验阶段开始，目标是确定游戏的整体观感。我们在VR中探索了各种技术及其对玩家的影响，包括数字水彩和虚拟蜡笔。2D游戏完全是手绘，而3D游戏模仿手绘风格的情况并不少见。然而，这种技术在VR游戏中并不常见。大多数针对非VR游戏的设计方法并不能很好地转化到虚拟世界，因为游戏环境是沉浸式的，而不是简单的2D投影。我们与迈克尔·克里梅尔（Michael Kremmel）进行了密切的合作。他是一名着色器程序员，为我们的游戏创建了一个定制版本的卡通着色器。这个工具符合我们的特殊要求，而我们将其集成到我们自己的技术堆栈中。结果是混合了平面cel-shading和自动生成的边缘线，而这我们作品观感的关键。这在上图中清晰可见。所有的元素都平铺，所有的纹理都手绘。这使得它们看起来像是“画出来的”，没那么计算机生成。另外，阴影看起来就像是有人用木炭或铅笔素描而成。这种“素描”是实时动画，阴影不断被重新绘制。至于上述计算边线，它们是基于PC的VR硬件的选项，但不建议用于Meta Quest应用程序。由于轮廓着色器最终会渲染每个对象两次，我们可以通过停用轮廓来提高性能。尽管这将移除游戏美术风格的某些特征，但我们知道我们需要这么做。另一种选择是将多边形保存在其他地方，并大幅降低视觉保真度。我们当然不想在可爱的动物身上节省多边形。我们的解决方案是在纹理上部分绘制轮廓。这种解决方案与平面阴影和照明相结合，补充了我们的视觉风格，并证明了可以节省性能。所有这些方法的结合使得游戏看起来与非VR内容相似，但不会在虚拟世界中产生分散注意力的视觉伪影。1.2 用LOD管理性能以每秒90帧的速度渲染两幅图像是这个项目最大的挑战。传统游戏只能以每秒30或60帧的速度渲染单个图像。为了实现这一点，我们实现了自定义的LOD技术。通常，在开放世界游戏中使用LOD来自动渲染远距离对象，并提供较少的细节。在《Across the Valley》中，玩家不能自由移动，但总是处于一个固定的行动点。因为玩家依然可以在VR中手动移动，所以传统的LOD系统必须持续监控LOD并在特定距离更换网格。对于玩家来说，这看起来像是对象突然弹出或突然改变形状。我们的系统会在玩家改变位置时决定所有对象的LOD。然后，只要玩家不跳转到下一个行动点，它就会冻结LOD管理。这种独特的移动方法使得我们能够避免弹出窗口，并通过确保新的网格和纹理不会不断地推送到显卡，从而节省了30%的性能。当把游戏从PC移植到Quest时，我们的LOD管理帮助我们减少了多边形的使用。因为几乎所有的对象都有3个不同的网格来支持3个LOD，所以我们屏蔽了最详细的LOD0，将LOD1网格设置为默认值，并在显示LOD2网格时改变阈值。这个系统在不牺牲整体观感的情况下节省了大量的三角形和顶点。1.3 关于Quest的其他考量《Across the Valley》中最密集的视觉是户外场景。因此，农场周围生长的草对性能有很大的影响。在PC版中，你可以看到草，多远都有。对于VR而言，这将消耗大量性能。对于Quest，我们降低了能见度范围和草的密度。为了提高性能，我们减少了95%的草，但每一簇草都是手工放置，以确保最大程度的覆盖，以及真实的、但又不是计算机生成的外观。2. 设计2.1 行动点移动系统晕动症是VR开发者面临的常见挑战。如果玩家在玩游戏时感到恶心，他们很可能就不会再玩。为了防止这一点，我们决定执行一个行动点系统，而不是默认的自由移动系统。游戏中分散着各种“行动点”，玩家可以在其中执行特定的行动。在每个行动点，执行任务所需的一切都在玩家触手可及之处。因此，玩家不需要在现实或虚拟世界中移动自己的位置。每个行动点都会自动将玩家对准正确的方向，从而消除了人为旋转的需要。有了这个系统，玩家永远不需要在点之间移动或人为地旋转自己。但围绕这种行动点系统设计游戏并非易事。游戏世界布局必须考虑到所有的行动点。每个行动点都需要帮助玩家快速完成任务，清晰地看到下一个行动点，并将每个任务所需的所有道具放在一个位置。在导航方面，我们确保玩家不需要在一个区域内跳跃超过两次才能到达目的地。随着跳跃次数的减少，玩家无需反复移动。对于可见性和视线，每个行动点和相关的世界元素都以实用的方式定位。例如，当我们在田地里工作时，我们将玩家旋转180度，确保他们的视线朝向农场而不是远离农场。在某些情况下，我们将路标作为回到玩家身后区域的捷径，作为不符合所有标准的行动点的备用措施。对于每个行动点，我们需要考虑玩家将要执行的任务，以及玩家执行特定行动所需的工具/设备/道具（我们称之为交互工具）。我们尝试着将所有重要道具放在玩家面前的120度弧线之上。这可以确保当玩家直视前方时，没有任何东西超过60度左右。为了定义道具与玩家之间的距离，我们创建了两个假人玩家，每个玩家都有两个与肩膀高度相同的球体。球体的半径类似于臂的长度。我们根据我们最小的员工和最高的员工创建了假人，两者都有一定的缓冲来反映非常矮和非常高的玩家。只要所有交互性都在虚拟玩家的范围内，真正的玩家同样可以接触到它们。最终，了解你的目标用户将帮助你决定是否值得设计这样一个系统。如果你的用户主要是由硬核VR粉丝组成，他们可能不会对流畅移动或自由传送有任何问题。设置默认移动系统更加快捷和简单，让你有更多时间专注于游戏的其他功能。但如果你的用户是休闲玩家，那就值得花时间设计一个行动点系统。2.2 活动和小游戏农场中的每一个行动都是玩家用自己的双手执行的活动。所有动作都整合到自动小游戏中。每当玩家执行这样的活动时，一个小游戏就会自动启动。这种方法允许玩家寻找得分和基于技能的结果，而不会中断小游戏通常带来的游戏流程。当玩家完成活动时，小游戏会自动运行，而不是“按下开始”或倒计时。例如，当第一颗种子落地时，小游戏就开始了，音乐同样随之改变，而田地旁边的木牌就会显示小游戏的状态。一旦所有的种子完成播种，种子碗清空，小游戏就会自动结束。通过自动开始和停止，我们避免了人为嵌入的小游戏可能产生的任何摩擦。在小游戏中，分数和进度会出现在场地旁边的木牌之上。小游戏的结果完全取决于玩家的技能。在小游戏的最后，玩家可以直接通过木制标志的分数和植物反应来判断自己是否成功。这一理念适用于其他游戏。比起让玩家手动启动一个明确的小游戏，开发者可以跟踪玩家的活动并自动开始和结束小游戏。一般来说，开发者应该确保玩家的成功或失败是显而易见的。我们通过让植物生长或死亡来实现这一目标，帮助玩家意识到“因为我在这方面做得好/不好，所以会产生/死亡一定量的植物。”2.3 动态音频《Across The Valley》的音频设计支持了贯穿整个游戏的轻松氛围。音乐是由最先进的音频服务提供商Dynamedion独家创作。这家公司为一系列的3A游戏做出了贡献，如《真人快打11》，《英雄连3》，《帝国时代4》和《全面战争：战锤》。音频设计的一个重要元素是能够动态混合不同版本音乐的自定义声音管理器。这个系统同时完成了两件事：音乐对情境的实时适应和音乐片段之间的动态转换。声音管理器用于调整音乐以适应当前的游戏节奏。当玩家活跃于其中一个方面时，音乐就会变得更加激烈。一旦玩家完成了一个任务，比如给植物浇水，音乐的节奏就会变慢。系统并不总是均匀地过渡，而是动态地选择两种音乐变化之间的理想过渡。如果在当前的片段中有一个张力点（例如鼓声），我们将插入一个尖锐的过渡。如果附近没有张力点，音乐就会融合得更流畅。当仔细听示例视频时，你会注意到第一个过渡（从A到B）比第二个过渡（从B回到A）短。这个长度是由下一个张力点的接近程度决定。在这个例子中，玩家在音乐出现紧张点后几毫秒才完成游戏。因为刚刚错过了一个紧张点，引擎花了最多3.5秒的时间来回到平缓（A）版本的音乐。作为一名VR开发者，你很可能会遇到一些普通游戏开发者没有甚至不知道的问题。《Across The Valley》的开发历时三年多。我们想要为VR创造一种独特的体验，这就要求我们在遇到问题时发挥创造性。3. 试试《Across The Valley》吧我们希望你们能喜欢《Across the Valley》，就像我们喜欢解决开发过程中遇到的挑战一样。现在，Meta Quest App Lab正在进行促销，与发行时的价格相比优惠了一半。---原文链接：https://news.nweon.com/118595预览时标签不可点